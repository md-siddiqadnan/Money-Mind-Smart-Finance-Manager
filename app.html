<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Colorful Animated Login with Firebase</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(-45deg, #ff6ec4, #7873f5, #4ade80, #facc15);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  @keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }

  /* Container */
  .login-container {
    background: rgba(255,255,255,0.85);
    padding: 2rem 3rem;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    width: 360px;
    max-width: 90vw;
    text-align: center;
    animation: fadeInScale 0.7s ease forwards;
  }

  @keyframes fadeInScale {
    0% {opacity: 0; transform: scale(0.8);}
    100% {opacity: 1; transform: scale(1);}
  }

  h2 {
    margin-bottom: 1.5rem;
    color: #4a148c;
    font-weight: 600;
  }

  /* Inputs */
  input[type="email"], input[type="password"] {
    width: 100%;
    padding: 0.8rem 1rem;
    margin-bottom: 1rem;
    border-radius: 50px;
    border: 2px solid #4a148c;
    font-size: 1rem;
    outline: none;
    transition: 0.3s;
  }
  input[type="email"]:focus, input[type="password"]:focus {
    border-color: #7e57c2;
    box-shadow: 0 0 8px #7e57c2;
  }

  /* Buttons */
  button {
    width: 100%;
    padding: 0.9rem;
    background: linear-gradient(45deg, #7e57c2, #4a148c);
    border: none;
    border-radius: 50px;
    color: white;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    margin-bottom: 1rem;
    box-shadow: 0 5px 15px rgba(74, 20, 140, 0.4);
    transition: background 0.3s;
    position: relative;
    overflow: hidden;
  }

  button:hover {
    background: linear-gradient(45deg, #4a148c, #7e57c2);
  }
  button:active {
    transform: scale(0.97);
  }

  /* Switch form */
  .switch-text {
    font-size: 0.9rem;
    color: #4a148c;
  }
  .switch-text span {
    color: #7e57c2;
    cursor: pointer;
    font-weight: 600;
    text-decoration: underline;
  }

  /* Error / success */
  .message {
    margin-bottom: 1rem;
    font-weight: 600;
  }
  .error {
    color: #e53935;
  }
  .success {
    color: #43a047;
  }
</style>
</head>
<body>

<div class="login-container" id="login-container">
  <h2 id="form-title">Log In</h2>

  <div id="message" class="message"></div>

  <input type="email" id="email" placeholder="Email" autocomplete="username" />
  <input type="password" id="password" placeholder="Password" autocomplete="current-password" />

  <button id="action-button">Log In</button>

  <p class="switch-text" id="switch-text">
    Don't have an account? <span id="switch-form">Sign Up</span>
  </p>
</div>

<script>
  // Initialize Firebase (replace config with yours)
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBQOraaLLNkk0P619ZuaJ2oynPLu6Zr7zY",
  authDomain: "smart-finanace-manager.firebaseapp.com",
  projectId: "smart-finanace-manager",
  storageBucket: "smart-finanace-manager.firebasestorage.app",
  messagingSenderId: "229938809168",
  appId: "1:229938809168:web:be8ddd53be17802314c455",
  measurementId: "G-ZVXH247594"
};

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Sound effect
  const clickSound = new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');

  const formTitle = document.getElementById('form-title');
  const actionButton = document.getElementById('action-button');
  const switchText = document.getElementById('switch-text');
  const switchFormSpan = document.getElementById('switch-form');
  const messageDiv = document.getElementById('message');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');

  let isLogin = true;

  function playClick() {
    clickSound.currentTime = 0;
    clickSound.play();
  }

  function showMessage(text, isError = false) {
    messageDiv.textContent = text;
    messageDiv.className = 'message ' + (isError ? 'error' : 'success');
  }

  function clearMessage() {
    messageDiv.textContent = '';
    messageDiv.className = 'message';
  }

  switchFormSpan.addEventListener('click', () => {
    playClick();
    isLogin = !isLogin;
    if(isLogin) {
      formTitle.textContent = 'Log In';
      actionButton.textContent = 'Log In';
      switchText.innerHTML = `Don't have an account? <span id="switch-form">Sign Up</span>`;
    } else {
      formTitle.textContent = 'Sign Up';
      actionButton.textContent = 'Sign Up';
      switchText.innerHTML = `Already have an account? <span id="switch-form">Log In</span>`;
    }
    clearMessage();
    // Rebind switchFormSpan event because innerHTML replaced it
    document.getElementById('switch-form').addEventListener('click', () => {
      playClick();
      isLogin = !isLogin;
      // toggle again
      if(isLogin) {
        formTitle.textContent = 'Log In';
        actionButton.textContent = 'Log In';
        switchText.innerHTML = `Don't have an account? <span id="switch-form">Sign Up</span>`;
      } else {
        formTitle.textContent = 'Sign Up';
        actionButton.textContent = 'Sign Up';
        switchText.innerHTML = `Already have an account? <span id="switch-form">Log In</span>`;
      }
      clearMessage();
      // recursive binding
      document.getElementById('switch-form').addEventListener('click', arguments.callee);
    });
  });

  actionButton.addEventListener('click', () => {
    playClick();
    clearMessage();
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if(!email || !password) {
      showMessage('Please enter email and password.', true);
      return;
    }

    if(isLogin) {
      // Log In
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          showMessage('Logged in successfully!');
          // You can redirect or load finance manager here
          setTimeout(() => {
            window.location.href = 'finance.html'; // Placeholder: next page
          }, 1500);
        })
        .catch((error) => {
          showMessage(error.message, true);
        });
    } else {
      // Sign Up
      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          showMessage('Account created! You can log in now.');
          isLogin = true;
          formTitle.textContent = 'Log In';
          actionButton.textContent = 'Log In';
          switchText.innerHTML = `Don't have an account? <span id="switch-form">Sign Up</span>`;
          emailInput.value = '';
          passwordInput.value = '';
          // Rebind switch form span
          document.getElementById('switch-form').addEventListener('click', () => {
            playClick();
            isLogin = !isLogin;
            // toggle forms recursively
            if(isLogin) {
              formTitle.textContent = 'Log In';
              actionButton.textContent = 'Log In';
              switchText.innerHTML = `Don't have an account? <span id="switch-form">Sign Up</span>`;
            } else {
              formTitle.textContent = 'Sign Up';
              actionButton.textContent = 'Sign Up';
              switchText.innerHTML = `Already have an account? <span id="switch-form">Log In</span>`;
            }
          });
        })
        .catch((error) => {
          showMessage(error.message, true);
        });
    }
  });
</script>
</body>
</html>
